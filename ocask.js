var OCask=function(){"use strict";function r(r,i,e){var s=0,o=0,a=r;a.rowArr.push(i);for(var h=0;h<a.rowArr.length;h++)(s+=a.rowArr[h].width)>a.container.offsetWidth&&(a.rowArr.pop(),0!==h?(s-=i.width,o=a.container.offsetWidth*(a.baseHeight/s),t(a,o,!1,!1)):0===h&&t(a,a.container.offsetWidth,!0,!1),a.rowArr=[i]);0!==a.rowArr.length&&e===a.imgArr.length-1&&(a.isGap?(o=a.baseHeight,t(a,o,!1,!0)):(o=a.container.offsetWidth*(a.baseHeight/s),t(a,o,!1,!1)))}function t(r,t,i,e){for(var s=r,o=document.createElement("div"),a=[],h=0,n=0;n<s.rowArr.length;n++){var g=s.rowArr[n];if(i)h=Math.round(g.height/g.width*t),g.dom.width=t,g.dom.height=h;else{var d=Math.round(g.scale*t);if(a.push(d),h=Math.round(t),!e&&n===s.rowArr.length-1){for(var c=n+1,f=0;c--;)f+=a[c];var l=s.container.offsetWidth-f;(l>0||l<0)&&(d+=l)}g.dom.height=h,g.dom.width=d}s.imgClass&&g.dom.setAttribute("class",s.imgClass),o.style.height=h+"px",s.rowClass&&o.setAttribute("class",s.rowClass),o.appendChild(g.dom)}s.container.appendChild(o)}var i=function(r){this.container=r.container,this.baseHeight=r.baseHeight||200,this.imgArr=r.imgArr,this.isGap=r.isGap,this.rowClass=r.rowClass||"",this.imgClass=r.imgClass||"",this.rowArr=[]};return i.prototype={getImgs:function(){var t=this;if(0!==t.imgArr.length){var i=function(e){var s=new Image;s.src=t.imgArr[e],s.onload=function(s){return function(){var o=s.width/s.height,a={dom:s,scale:o,height:t.baseHeight,width:t.baseHeight*o};r(t,a,e),t.imgArr[e+1]&&i(e+1)}}(s)};i(0)}}},i}();