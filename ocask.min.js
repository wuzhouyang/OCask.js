var OCask=function(){"use strict";function r(r,i,e){var h=0,o=0,n=r;n.rowArr.push(i);for(var s=0;s<n.rowArr.length;s++)(h+=n.rowArr[s].width)>n.conWidth&&(n.rowArr.pop(),0!==s?(h-=i.width,o=n.conWidth*(n.baseHeight/h),t(n,o,!1,!1)):0===s&&t(n,n.conWidth,!0,!1),n.rowArr=[i]);if(0!==n.rowArr.length&&e===n.imgArr.length-1){if(1===n.rowArr.length)return void t(n,n.conWidth,!0,!1);n.isGap?(o=n.baseHeight,t(n,o,!1,!0)):(o=n.conWidth*(n.baseHeight/h),t(n,o,!1,!1))}}function t(r,t,i,e){for(var h=r,o=document.createElement("div"),n=[],s=0,a=0;a<h.rowArr.length;a++){var c=h.rowArr[a];if(i)s=Math.round(c.height/c.width*t),c.dom.width=t,c.dom.height=s;else{var g=Math.round(c.scale*t);if(n.push(g),s=Math.round(t),!e&&a===h.rowArr.length-1){for(var d=a+1,l=0;d--;)l+=n[d];var m=h.conWidth-l;(m>0||m<0)&&(g+=m)}c.dom.height=s,c.dom.width=g}h.imgClass&&c.dom.setAttribute("class",h.imgClass),o.style.height=s+"px",h.rowClass&&o.setAttribute("class",h.rowClass),o.appendChild(c.dom)}h.container.appendChild(o),h.cacheImgRow.push(o)}function i(t){window.onresize=function(){if(t.container.offsetWidth!==t.conWidth){t.conWidth=t.container.offsetWidth,t.rowArr=[];for(var i=t.container.childNodes,e=i.length-1;e>=0;e--)t.container.removeChild(i[e]);for(var e=0;e<t.cacheImg.length;e++)r(t,t.cacheImg[e],e)}}}var e=function(r){this.container=r.container,this.conWidth=this.container.offsetWidth,this.baseHeight=r.baseHeight||200,this.imgArr=r.imgArr,this.isGap=r.isGap,this.responsive=r.responsive,this.rowClass=r.rowClass||"",this.imgClass=r.imgClass||"",this.rowArr=[],this.cacheImg=[],this.cacheImgRow=[]};return e.prototype={getImgs:function(){var t=this;if(0!==t.imgArr.length){var e=function(h){var o=new Image;o.src=t.imgArr[h],o.onload=function(o){return h===t.imgArr.length-1&&t.responsive&&i(t),function(){var i=o.width/o.height,n={dom:o,scale:i,height:t.baseHeight,width:t.baseHeight*i};r(t,n,h),t.cacheImg.push(n),t.imgArr[h+1]&&e(h+1)}}(o)};e(0)}}},e}();